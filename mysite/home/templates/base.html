{% load static %}
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs/dt-1.10.16/datatables.min.css"/>
  <link rel="stylesheet" href="{% static 'css/global.css' %}">
  <script src="http://code.jquery.com/jquery-latest.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/v/bs/dt-1.10.16/datatables.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
</head>
  {% block head %} {% endblock %}
  <body>
    {% if user.is_authenticated %}
    <div class="container-fluid">
      <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="navbar-header">
          <button type="button" data-target="#navbarCollapse" data-toggle="collapse" class="navbar-toggle">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="{% url 'home:home' %}">
          <img src="https://i.imgur.com/fZgWWVK.png">
          </a>
        </div>
        <div id="navbarCollapse" class="collapse navbar-collapse">
          <ul class="nav navbar-nav" id="left_side">
            {% if user.is_requester %}
            <li class="inactive links"><a href="{% url 'home:requester' %}">Home</a></li>
            {% endif %}
            {% if user.is_authoriser %}
            <li class="inactive links"><a href="{% url 'home:authoriser' %}">Home</a></li>
            {% endif %}
            {% if user.is_requester %}
            <li class="inactive links"><a href="{% url 'home:absence' %}">Request</a></li>
            {% endif %}
            <li class="dropdown">
              <a data-toggle="dropdown" class="dropdown-toggle" href="#"> Settings <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Button 1</a></li>
                <li><a href="#">Button 2</a></li>
                <li><a href="#">Button 3</a></li>
                <li class="divider"></li>
                <li><a href="#">Button 4</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="{% url 'accounts:logout' %}">Logout</a></li>
            <li>
              <a></a>
            </li>
          </ul>
        </div>
      </nav>
    </div>
    {% endif %}
    {% if user.is_requester %}
    {% for message in messages %}
    <div class="alert {{ message.tags }} alert-dismissible" role="alert" style="position:fixed; top: 50px;left: 0;right: 0;z-index: 7000;   margin-bottom: 1px;
      height: 30px;
      line-height:30px;
      padding:0px 15px;">
      {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    <div class="container" style="position:relative;top:50px; background-color:#ffffff" ;>
      <div class="row">
        {% block body %}{% endblock %}
      </div>
    </div>
    <script>
      $(document).ready(function() {

          $('#my_table').DataTable( {
              "lengthMenu": [[6], [6]]
          });

          // Search box
          $('#searchbox').on( 'keyup click', function () {
              $('.table').DataTable().search(
                  $('#searchbox').val()
              ).draw();
          });

          var table = $('#my_table').DataTable();

          $('#button-all:input').on('change', function(){
              table.search('').columns().search().draw();
          });

          $('#button-pending:input').on('change', function(){
              table.search(this.value).columns(5).search().draw();
          });

          $('#button-approved:input').on('change', function(){
              table.search(this.value).columns(5).search().draw();
          });

          $('#button-declined:input').on('change', function(){
              table.search(this.value).columns(5).search().draw();
          });

          // Default table results (pending)
          $('input[type=radio]').each(function(){
              if($(this).is(':checked')){
                  table.search(this.value).columns(5).search().draw();
              }
          });

          $("#my_table_paginate").detach().appendTo('#footer');
          $("#my_table_info").detach().appendTo('#footer1');

          setTimeout(function() {
              $(".alert").fadeOut("slow");
          }, 5000);

          $(".links").each(function() {

              if ($('a', this).attr("href") === window.location.pathname) {
                  $(this).removeClass('inactive').addClass('active');
              }
          });

          {% if user.is_requester %}
          var total_entries = 0;

          {% for entry in entries %}

              total_entries++;

          {% endfor %}

          // Appends the total entries final value to selected element
          $("#pending-text p").append(total_entries);

          {% endif %}
      });
    </script>
  </body>
</html>